<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>MauiSherpa</title>
    <base href="/" />
    <link rel="icon" href="data:,">
    <!-- Font Awesome for Blazorise icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <!-- App theme styles -->
    <link rel="stylesheet" href="css/app.css" />
    <!-- xterm.js for terminal rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        #app {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        body {
            -webkit-tap-highlight-color: transparent;
        }

        /* Remove focus outline from non-interactive elements */
        h1, h2, h3, h4, h5, h6, p, div, span, section, article, header, main {
            outline: none;
        }

        /* Keep focus visible for interactive elements for accessibility */
        button:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible {
            outline: 2px solid #0078d4;
            outline-offset: 2px;
        }

        /* Remove default focus ring from buttons/links when clicked (not keyboard nav) */
        button:focus:not(:focus-visible), a:focus:not(:focus-visible) {
            outline: none;
        }

        #blazor-error-ui {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: #f44336;
            color: white;
            text-align: center;
        }

        #blazor-error-ui .dismiss {
            cursor: pointer;
            margin-left: 1rem;
        }
        
        /* Splash screen */
        #splash-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1a1625 0%, #2d1f4e 50%, #1a1625 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 99999;
            transition: opacity 0.5s ease-out;
        }
        
        #splash-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .splash-logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.4);
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        .splash-logo svg {
            width: 70px;
            height: 70px;
        }
        
        .splash-title {
            margin-top: 24px;
            font-size: 28px;
            font-weight: 600;
            color: white;
            letter-spacing: 0.5px;
        }
        
        .splash-subtitle {
            margin-top: 8px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .splash-loader {
            margin-top: 40px;
            width: 48px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .splash-loader::after {
            content: '';
            display: block;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            border-radius: 2px;
            animation: loader-slide 1s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 20px 60px rgba(99, 102, 241, 0.4); }
            50% { box-shadow: 0 20px 80px rgba(139, 92, 246, 0.6); }
        }
        
        @keyframes loader-slide {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(300%); }
        }
    </style>
</head>
<body>
    <!-- Splash screen overlay -->
    <div id="splash-screen">
        <div class="splash-logo">
            <!-- Mountain/Sherpa icon -->
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 21l4-10 4 10"/>
                <path d="M12 11l5-8"/>
                <path d="M12 11L7 3"/>
                <path d="M3 21h18"/>
                <circle cx="12" cy="6" r="2"/>
            </svg>
        </div>
        <div class="splash-title">MAUI Sherpa</div>
        <div class="splash-subtitle">Your guide to .NET MAUI development</div>
        <div class="splash-loader"></div>
    </div>
    
    <div id="app"></div>

    <div id="blazor-error-ui" data-nosnippet>
        An unhandled error has occurred.
        <a href="." class="reload" style="color: white;">Reload</a>
        <span class="dismiss"><i class="fas fa-times"></i></span>
    </div>

    <script src="_framework/blazor.webview.js" autostart="false"></script>
    <script src="js/terminal.js"></script>
    <script>
        // Hide splash screen once Blazor is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Check for Blazor load completion
            const checkBlazorReady = setInterval(function() {
                const app = document.getElementById('app');
                if (app && app.children.length > 0) {
                    const splash = document.getElementById('splash-screen');
                    if (splash) {
                        splash.classList.add('fade-out');
                        setTimeout(function() {
                            splash.remove();
                        }, 500);
                    }
                    clearInterval(checkBlazorReady);
                }
            }, 100);
            
            // Safety timeout - hide splash after 10 seconds max
            setTimeout(function() {
                const splash = document.getElementById('splash-screen');
                if (splash) {
                    splash.classList.add('fade-out');
                    setTimeout(function() {
                        splash.remove();
                    }, 500);
                }
                clearInterval(checkBlazorReady);
            }, 10000);
        });
    </script>
</body>
</html>
